create schema if not exists PLATAFORMA;	
USE plataforma;

-- Crear tabla MEDIOS_DE_PAGO
CREATE TABLE MEDIOS_DE_PAGO (
    Id_pago INT AUTO_INCREMENT NOT NULL PRIMARY KEY,
    Credito DECIMAL(16,0),
    Debito DECIMAL(16,0)
);

-- Crear tabla COMPLEMENTOS
CREATE TABLE COMPLEMENTOS (
    ID_compl INT AUTO_INCREMENT NOT NULL PRIMARY KEY,
    Nombre_compl VARCHAR(100) NOT NULL,
    Precio_Compl DECIMAL(7,2) NOT NULL
);

-- Crear tabla JUEGOS_PAGOS
CREATE TABLE JUEGOS_PAGOS (
    Genero VARCHAR(50) NOT NULL,
    ID_JP INT AUTO_INCREMENT NOT NULL PRIMARY KEY,
    Titulo_JP VARCHAR(50) NOT NULL,
    Fecha_lanzamiento DATE NOT NULL,
    Plataforma VARCHAR(30) NOT NULL,
    Precio DECIMAL(7,2) NOT NULL,
    Requisito_rec VARCHAR(100) NOT NULL,
    Requisito_min VARCHAR(100) NOT NULL,
    ID_compl INT,
    FOREIGN KEY (ID_compl) REFERENCES COMPLEMENTOS(ID_compl)
);

-- Crear tabla JUEGOS_GRATIS
CREATE TABLE JUEGOS_GRATIS (
    ID_JG INT AUTO_INCREMENT NOT NULL PRIMARY KEY,
    Titulo_JG VARCHAR(50) NOT NULL,
    Genero VARCHAR(50) NOT NULL,
    Fecha_lanzamiento DATE NOT NULL,
    Plataforma VARCHAR(30) NOT NULL,
    Requisito_rec VARCHAR(100) NOT NULL,
    Requisito_min VARCHAR(100) NOT NULL
);

-- Crear tabla USUARIOS
CREATE TABLE USUARIOS (
    Fecha_nac date NOT NULL,
    email VARCHAR(100) NOT NULL,
    Nombre_usuario VARCHAR(30) NOT NULL,
    ID_usuario INT AUTO_INCREMENT NOT NULL PRIMARY KEY,
    ID_JP INT,
    ID_JG INT,
    FOREIGN KEY (ID_JP) REFERENCES JUEGOS_PAGOS(ID_JP),
    FOREIGN KEY (ID_JG) REFERENCES JUEGOS_GRATIS(ID_JG)
);

-- Crear tabla Compras
CREATE TABLE Compras (
    ID_compras INT AUTO_INCREMENT NOT NULL PRIMARY KEY,
    ID_JP INT,
    ID_JG INT,
    ID_pago INT,
    FOREIGN KEY (ID_JP) REFERENCES JUEGOS_PAGOS(ID_JP),
    FOREIGN KEY (ID_JG) REFERENCES JUEGOS_GRATIS(ID_JG),
    FOREIGN KEY (ID_pago) REFERENCES MEDIOS_DE_PAGO(Id_pago)
);
